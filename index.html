<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Anabel ‚ù§Ô∏è Valentine's Day 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            touch-action: manipulation;
            overflow: hidden;
        }

        #gameContainer {
            width: 100%;
            max-width: 450px;
            height: 100vh;
            max-height: 800px;
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
            border: 3px solid #ff4d6d;
        }

        #screen {
            width: 100%;
            height: 100%;
            position: relative;
            background: #000;
            overflow: hidden;
        }

        .stage {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: none;
            flex-direction: column;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            padding: 20px;
        }

        .stage.active {
            display: flex;
        }

        /* Image auto-sizing for all stages with background images */
        [style*="background-image"] {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* Video auto-sizing */
        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* Images inside stages (like heartbeat image) */
        .stage img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* Heartbeat image specific */
        .heartbeat-image {
            animation: heartbeat 1.2s ease-in-out infinite;
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* Message boxes auto-sizing */
        .message-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin: 20px;
            color: #333;
            box-shadow: 0 10px 30px rgba(255, 77, 109, 0.5);
            border: 3px solid #ff4d6d;
            max-height: 70%;
            overflow-y: auto;
            width: auto;
            max-width: 90%;
            word-wrap: break-word;
        }

        /* Grid for chocolate day - responsive */
        .grid-3x3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            padding: 10px;
            height: auto;
            max-height: 60%;
            aspect-ratio: 1/1;
            margin: auto;
            width: 100%;
            max-width: 350px;
        }

        .grid-item {
            background-size: cover;
            background-position: center;
            background-image: url('images/chocolate-day/ferrero.png');
            border-radius: 10px;
            box-shadow: 0 0 15px gold;
            cursor: pointer;
            transition: all 0.3s;
            aspect-ratio: 1/1;
        }

        .grid-item.clicked {
            opacity: 0.5;
            box-shadow: none;
        }

        .grid-item.message {
            box-shadow: 0 0 25px #ff4d6d, 0 0 40px #ff69b4;
        }

        /* Floating messages - responsive positioning */
        .floating-message {
            position: absolute;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(255,77,109,0.3);
            font-size: clamp(12px, 3vw, 14px);
            animation: float 3s ease-in-out infinite;
            border: 2px solid #ff4d6d;
            cursor: pointer;
            max-width: min(150px, 40%);
            z-index: 50;
            word-wrap: break-word;
        }

        /* Word puzzle - responsive */
        .word-puzzle {
            background: rgba(0,0,0,0.7);
            padding: clamp(10px, 3vw, 15px);
            border-radius: 10px;
            margin: 10px;
            z-index: 50;
            position: relative;
            width: 90%;
            max-width: 350px;
            align-self: center;
        }

        .puzzle-input {
            display: flex;
            justify-content: center;
            gap: clamp(5px, 2vw, 10px);
            flex-wrap: wrap;
        }

        .puzzle-letter {
            width: clamp(40px, 12vw, 50px);
            height: clamp(40px, 12vw, 50px);
            text-align: center;
            font-size: clamp(20px, 6vw, 30px);
            border: 3px solid #ff4d6d;
            border-radius: 10px;
            background: white;
            text-transform: uppercase;
        }

        /* Buttons responsive */
        .btn {
            background: #ff4d6d;
            color: white;
            border: none;
            padding: clamp(12px, 4vw, 15px) clamp(25px, 8vw, 40px);
            font-size: clamp(16px, 5vw, 20px);
            border-radius: 50px;
            margin: 10px;
            cursor: pointer;
            box-shadow: 0 5px 0 #b30f2e;
            transition: all 0.1s;
            font-weight: bold;
            letter-spacing: 2px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            white-space: nowrap;
        }

        .btn:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #b30f2e;
        }

        .btn-small {
            padding: clamp(8px, 2.5vw, 10px) clamp(15px, 5vw, 25px);
            font-size: clamp(14px, 4vw, 16px);
        }

        /* Text responsive */
        .title {
            color: white;
            text-shadow: 3px 3px 0 #ff4d6d;
            font-size: clamp(20px, 6vw, 28px);
            text-align: center;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        /* Shiny text responsive */
        .shiny-flashing {
            font-size: clamp(40px, 15vw, 60px);
            font-weight: bold;
            text-align: center;
            background: linear-gradient(90deg, #ffd700, #ff69b4, #ffd700, #ff69b4);
            background-size: 300% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shineFlash 1s linear infinite, heartbeat 0.8s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.7);
            letter-spacing: 5px;
            word-wrap: break-word;
            padding: 0 10px;
        }

        /* Golden ribbon responsive */
        #goldenRibbon {
            position: absolute;
            top: 80px;
            left: 0;
            width: 100%;
            background: linear-gradient(90deg, gold, #ffd700, gold);
            padding: clamp(8px, 2vh, 10px) 0;
            display: none;
            overflow: hidden;
            z-index: 40;
        }

        #goldenRibbon p {
            color: white;
            font-weight: bold;
            animation: slide 10s linear infinite;
            white-space: nowrap;
            font-size: clamp(14px, 4vw, 16px);
        }

        /* Location message boxes on videos */
        .stage .message-box {
            max-width: 90%;
            margin: 0 auto;
            padding: clamp(15px, 4vh, 25px);
        }

        .stage .message-box p {
            font-size: clamp(16px, 5vw, 24px);
            word-wrap: break-word;
        }

        /* Emoji shower responsive */
        .emoji-shower {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .emoji {
            position: absolute;
            font-size: clamp(20px, 8vw, 30px);
            animation: fall linear forwards;
        }

        /* Mode toggle button */
        .mode-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff4d6d;
            color: white;
            border: none;
            padding: clamp(5px, 2vh, 8px) clamp(10px, 3vw, 15px);
            border-radius: 20px;
            font-size: clamp(12px, 3.5vw, 14px);
            z-index: 200;
            cursor: pointer;
        }

        /* Slideshow container */
        #slideshow {
            width: 100%;
            padding: 10px;
        }

        #slideshowMessage {
            width: 90%;
            max-width: 350px;
            margin: 20px auto;
        }

        /* Heartbeat container */
        #stage11 {
            position: relative;
            overflow: hidden;
        }

        #stage11 .title {
            font-size: clamp(30px, 10vw, 48px);
            background: rgba(0,0,0,0.5);
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
        }

        /* Cloud overlay */
        .cloud-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            background: rgba(255, 255, 255, 0);
            transition: background 0.3s;
        }

        .cloud-overlay.active {
            background: rgba(255, 255, 255, 0.9);
        }

        /* Responsive breakpoints */
        @media (max-width: 350px) {
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .floating-message {
                font-size: 11px;
                padding: 5px 10px;
            }
            
            .puzzle-letter {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
        }

        @media (min-width: 600px) {
            #gameContainer {
                max-width: 450px;
            }
            
            .floating-message {
                font-size: 14px;
            }
        }

        /* Ensure buttons are always tappable */
        button {
            min-height: 44px;
            min-width: 44px;
        }

        /* Fix for stage 4 and 8 buttons */
        #stage4 .btn, #stage8 .btn {
            position: relative;
            z-index: 100;
        }

        /* Ensure text is readable on all backgrounds */
        .stage {
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }

        /* Animations */
        @keyframes heartbeat {
            0% { transform: scale(1); }
            25% { transform: scale(1.08); }
            35% { transform: scale(1); }
            45% { transform: scale(1.04); }
            55% { transform: scale(1); }
            100% { transform: scale(1); }
        }

        @keyframes shineFlash {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fall {
            to { transform: translateY(100vh); }
        }

        @keyframes slide {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Audio players -->
        <audio id="song1" loop>
            <source src="audio/song1.mp3" type="audio/mpeg">
        </audio>
        <audio id="song2" loop>
            <source src="audio/song2.mp3" type="audio/mpeg">
        </audio>
        <audio id="song3" loop>
            <source src="audio/song3.mp3" type="audio/mpeg">
        </audio>

        <div id="screen">
            <!-- Cloud overlay for transitions -->
            <div id="cloudOverlay" class="cloud-overlay"></div>

            <!-- STAGE 1: Confrontation - pure text -->
            <div id="stage1" class="stage active" style="background: linear-gradient(145deg, #1a1a2e, #16213e);">
                <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px;">
                    <h1 class="title" style="font-size: 28px; margin-bottom: 40px; color: white;">This is the Valentine's Day 2026 sweet gift to my lovely Anabel by her lovely Harsh</h1>
                    <h2 class="title" style="font-size: 48px; margin-bottom: 60px; color: #ff4d6d; text-shadow: 0 0 20px #ff4d6d;">Are you ready?</h2>
                    <button class="btn" onclick="startGame()">YES, I'M READY ‚ù§Ô∏è</button>
                </div>
            </div>

            <!-- STAGE 2: World Map zoom Spain - VIDEO -->
            <div id="stage2" class="stage">
                <video autoplay muted onended="cloudTransition(2, 4)">
                    <source src="images/2-world-map.mp4" type="video/mp4">
                </video>
                <div style="position: absolute; bottom: 50px; left: 0; width: 100%; display: flex; flex-direction: column; align-items: center; z-index: 10;">
                    <div class="message-box" style="background: rgba(255,255,255,0.9);">
                        <p style="font-size: 24px; text-align: center;">üìç Torrent, Spain</p>
                        <p style="text-align: center;">Where your journey began...</p>
                    </div>
                </div>
            </div>

            <!-- STAGE 3: Cloud cover (auto-transition) -->
            <div id="stage3" class="stage" style="background: white;">
                <!-- Empty stage for cloud transition -->
            </div>

            <!-- STAGE 4: Ana pic with message -->
            <div id="stage4" class="stage" style="background-image: url('images/4-ana-pixel.png');">
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="message-box" id="anaMessageBox" style="display: none;">
                        <p id="anaMessage">My beautiful Ana... You are the reason my world is colorful. Every day with you feels like a dream I never want to wake up from. I love you! ‚ù§Ô∏è</p>
                        <button class="btn btn-small" onclick="closeMessage('ana')">‚ù§Ô∏è</button>
                    </div>
                    <button class="btn" onclick="showMessage('ana')">Read Message</button>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="cloudTransition(4, 6)">Continue</button>
            </div>

            <!-- STAGE 5: Cloud cover 2 -->
            <div id="stage5" class="stage" style="background: white;">
            </div>

            <!-- STAGE 6: India map - VIDEO -->
            <div id="stage6" class="stage">
                <video autoplay muted onended="cloudTransition(6, 8)">
                    <source src="images/5-india-map.mp4" type="video/mp4">
                </video>
                <div style="position: absolute; bottom: 50px; left: 0; width: 100%; display: flex; flex-direction: column; align-items: center; z-index: 10;">
                    <div class="message-box" style="background: rgba(255,255,255,0.9);">
                        <p style="font-size: 24px; text-align: center;">üìç India</p>
                        <p style="text-align: center;">Where my heart beats for you...</p>
                    </div>
                </div>
            </div>

            <!-- STAGE 7: Cloud cover 3 -->
            <div id="stage7" class="stage" style="background: white;">
            </div>

            <!-- STAGE 8: Harsh pic with message -->
            <div id="stage8" class="stage" style="background-image: url('images/7-harsh-pixel.png');">
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="message-box" id="harshMessageBox" style="display: none;">
                        <p id="harshMessage">Your Harsh... The man who crossed oceans (virtually) to find you. You are my greatest adventure. I love you, Anabel! üíï</p>
                        <button class="btn btn-small" onclick="closeMessage('harsh')">‚ù§Ô∏è</button>
                    </div>
                    <button class="btn" onclick="showMessage('harsh')">Read Message</button>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextStage(8)">Continue</button>
            </div>

            <!-- STAGE 9: WOS image -->
            <div id="stage9" class="stage" style="background-image: url('images/8-wos.png');">
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextStage(9)">Continue</button>
            </div>

            <!-- STAGE 10: Batman imagine -->
            <div id="stage10" class="stage" style="background-image: url('images/9-batman.png');">
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextStage(10)">Continue</button>
            </div>

            <!-- STAGE 11: Heartbeat image -->
            <div id="stage11" class="stage">
                <img src="images/12-heartbeat.png" class="heartbeat-image" alt="Heartbeat">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 10;">
                    <h1 class="title" style="font-size: 48px; color: white; text-shadow: 0 0 20px red;">NO GOING BACK</h1>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px; z-index:20;" onclick="nextStage(11)">Continue</button>
            </div>

            <!-- STAGE 12: Messages slideshow with VIDEO background -->
            <div id="stage12" class="stage">
                <!-- Background Video -->
                <video autoplay muted loop style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1;">
                    <source src="images/13-messages-bg.mp4" type="video/mp4">
                </video>
                
                <!-- Dark overlay to make text readable -->
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); z-index: 2;"></div>
                
                <!-- Content on top of video -->
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; z-index: 3;">
                    <div class="message-box" id="slideshowMessage" style="background: rgba(255,255,255,0.95); max-width: 80%;">
                        <p id="currentMessage" style="font-size: 18px; line-height: 1.6;">Message 1 of your beautiful words...</p>
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                        <button class="btn-small" onclick="prevMessage()" style="margin: 5px;">‚Üê Previous</button>
                        <button class="btn-small" onclick="nextMessage()" style="margin: 5px;">Next ‚Üí</button>
                    </div>
                </div>
                
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px; z-index: 4;" onclick="startValentineWeek()">Begin Valentine's Week ‚ù§Ô∏è</button>
            </div>

            <!-- STAGE 13: Rose Day -->
            <div id="stage13" class="stage" style="background-image: url('images/rose-day/lavender-empty.png'); background-size: cover;">
                <div style="position: absolute; top: 20px; left: 0; width: 100%; text-align: center; z-index: 50;">
                    <button class="btn" id="waterBtn" onclick="waterFlowers()">üíß Water them</button>
                </div>
                <div id="rosePopup" class="message-box" style="display: none; position: relative; z-index: 100;">
                    <p id="roseMessage"></p>
                    <button class="btn-small" onclick="continueWatering()">Continue watering</button>
                </div>
                <div id="goldenRibbon" style="position: absolute; top: 80px; left: 0; width: 100%; background: linear-gradient(90deg, gold, #ffd700, gold); padding: 10px 0; display: none; overflow: hidden; z-index: 40;">
                    <p style="color: white; font-weight: bold; animation: slide 10s linear infinite; white-space: nowrap;" id="ribbonMessage">üíï I love you more than all the flowers in the world üíï</p>
                </div>
                <button class="btn-small" id="nextDayBtn" style="position: absolute; bottom: 20px; right: 20px; display: none;" onclick="nextDay(13)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 14: Propose Day -->
            <div id="stage14" class="stage" style="background-image: url('images/propose-day/propose.png'); background-size: cover;">
                <div id="messageBox1" class="floating-message" style="top: 20%; left: 10%;" onclick="expandMessage(1)">"hey you are....."</div>
                <div id="messageBox2" class="floating-message" style="top: 40%; right: 10%;" onclick="expandMessage(2)">"i remember when....."</div>
                <div id="messageBox3" class="floating-message" style="bottom: 30%; left: 15%;" onclick="expandMessage(3)">"you make me....."</div>
                <div id="messageBox4" class="floating-message" style="top: 60%; left: 20%;" onclick="expandMessage(4)">"my favorite thing....."</div>
                <div id="messageBox5" class="floating-message" style="bottom: 20%; right: 15%;" onclick="expandMessage(5)">"forever starts....."</div>
                
                <div id="expandedMessageBox" class="message-box" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; z-index: 200;">
                    <p id="expandedMessageText"></p>
                    <button class="btn-small" onclick="closeExpandedMessage()">‚ù§Ô∏è</button>
                </div>
                
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextDay(14)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 15: Chocolate Day - 3x3 Ferrero grid -->
            <div id="stage15" class="stage" style="background: #fff0f5;">
                <div class="grid-3x3" id="chocolateGrid"></div>
                <div id="chocoMessageBox" class="message-box" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 200;">
                    <p id="chocoMessage"></p>
                    <button class="btn-small" onclick="closeChocoMessage()">‚ù§Ô∏è Check Another</button>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextDay(15)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 16: Teddy Day -->
            <div id="stage16" class="stage" style="background-image: url('images/teddy-day/teddy.png'); background-size: cover;">
                <div class="word-puzzle">
                    <h3 style="color: white; text-align: center;">4 _ _ _ _</h3>
                    <div class="puzzle-input">
                        <input type="text" class="puzzle-letter" id="letter1" maxlength="1" onkeyup="checkPuzzle()">
                        <input type="text" class="puzzle-letter" id="letter2" maxlength="1" onkeyup="checkPuzzle()">
                        <input type="text" class="puzzle-letter" id="letter3" maxlength="1" onkeyup="checkPuzzle()">
                        <input type="text" class="puzzle-letter" id="letter4" maxlength="1" onkeyup="checkPuzzle()">
                    </div>
                </div>
                
                <div id="teddyVideo" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                    <video loop autoplay muted>
                        <source src="images/teddy-day/teddy-video.mp4" type="video/mp4">
                    </video>
                </div>
                
                <div id="floatingMessages" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                    <!-- 6 floating messages will be added by JS -->
                </div>
                
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px; z-index: 100;" onclick="nextDay(16)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 17: Promise Day -->
            <div id="stage17" class="stage" style="background-image: url('images/promise-day/promise.png'); background-size: cover;">
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="message-box" id="promiseMessageBox" style="display: none;">
                        <p id="promiseText"></p>
                        <button class="btn-small" onclick="closePromiseMessage()">‚ù§Ô∏è</button>
                    </div>
                    <button class="btn" id="promiseBtn" onclick="showNextPromise()">Read Promise</button>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextDay(17)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 18: Hug Day -->
            <div id="stage18" class="stage" style="background-image: url('images/hug-day/hug.png'); background-size: cover;">
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                    <div class="message-box" id="hugMessageBox" style="display: none;">
                        <p id="hugText"></p>
                        <button class="btn-small" onclick="closeHugMessage()">‚ù§Ô∏è</button>
                    </div>
                    <p style="color: white; margin-bottom: 20px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px;" id="hugCounter">Tap the image for hugs!</p>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="nextDay(18)">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 19: Kiss Day -->
            <div id="stage19" class="stage" style="background: linear-gradient(145deg, #1a1a2e, #16213e);">
                <div style="flex:1; display: flex; justify-content: center; align-items: center;">
                    <h1 class="shiny-flashing">LOOK AT ME</h1>
                </div>
                <button class="btn-small" style="position: absolute; bottom: 20px; right: 20px;" onclick="goToValentinesDay()">Next Day ‚Üí</button>
            </div>

            <!-- STAGE 20: Valentine's Day Q&A -->
            <div id="stage20" class="stage" style="background: linear-gradient(145deg, #ff4d6d, #b30f2e);">
                <button id="modeToggle" class="mode-toggle" onclick="toggleMode()">üé§ Voice Mode</button>
                
                <div style="flex:1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px;">
                    <div id="questionBox" class="message-box" style="width: 100%;">
                        <h2 id="questionText">Do you oath to be truthful with your answer?</h2>
                        <p id="answerHint" style="color: #666; margin: 10px 0;">Say: "yes" or "no"</p>
                        <div id="buttonAnswers" style="display: none;">
                            <button class="btn-small" onclick="handleAnswer('yes')">Yes</button>
                            <button class="btn-small" onclick="handleAnswer('no')">No</button>
                        </div>
                    </div>
                    
                    <div id="voiceIndicator" style="color: white; margin: 10px;">üé§ Listening...</div>
                </div>
            </div>

            <!-- Emoji shower container -->
            <div id="emojiShower" class="emoji-shower"></div>
        </div>
    </div>

    <script>
        // Game state
        let currentStage = 1;
        let voiceMode = true;
        let recognition;
        
        // Message arrays - CUSTOMIZE THESE!
        let anaMessage = "My beautiful Ana... You are the reason my world is colorful. Every day with you feels like a dream I never want to wake up from. I love you! ‚ù§Ô∏è";
        let harshMessage = "Your Harsh... The man who crossed oceans (virtually) to find you. You are my greatest adventure. I love you, Anabel! üíï";
        
        // Rose Day
        let roseMessages = [
            "Message 1: The first time I saw you, I knew...",
            "Message 2: Your smile lights up my entire world",
            "Message 3: Every moment with you is precious",
            "Message 4: You make me want to be the best version of myself",
            "Message 5: I love you more than all the stars in the sky"
        ];
        let roseCount = 0;
        
        // Propose Day messages
        let proposeMessages = [
            "Will you be mine forever? I've loved you from the moment we met, and that love has only grown stronger. You are my everything.",
            "I remember the first time you said my name. It sounded like music. I want to hear it every day for the rest of my life.",
            "You make me feel like I can fly. With you, anything is possible. You're my strength, my peace, my home.",
            "My favorite thing in the world is making you laugh. That sound is better than any melody. I want to spend my life creating that sound.",
            "Forever starts now. With you, I want every sunrise, every sunset, and everything in between. Be mine always."
        ];
        
        // Chocolate Day messages (2 secrets)
        let chocolateMessages = [
            "You're the sweetest thing in my life! üç´",
            "You + Me = Perfect together! üíï"
        ];
        let chocolateMessagePositions = [];
        let chocolateClicked = [];
        
        // Teddy Day
        let teddyMessages = [
            "You're as huggable as a teddy bear! üß∏",
            "I'd travel any distance just to hug you",
            "You're my comfort zone",
            "Wrapped in your love feels like home",
            "You make everything better",
            "My favorite place is in your arms"
        ];
        
        // Promise Day
        let promises = [
            "I promise to always listen to you, even when we're far apart.",
            "I promise to make you laugh every single day.",
            "I promise to be your biggest supporter in everything you do.",
            "I promise to always be honest with you, no matter what.",
            "I promise to love you more with each passing day.",
            "I WILL LOVE YOU FOREVER"
        ];
        let promiseCount = 0;
        
        // Hug Day
        let hugMessages = [
            "This hug is for all the nights we talk until sunrise ü§ó",
            "This hug is for when you're feeling down üíï",
            "This hug is just because you're you ‚ù§Ô∏è",
            "This hug is for all the miles between us ü•∞",
            "This hug is forever and always üíñ"
        ];
        let hugMessageCount = 0;
        let hugTaps = 0;
        let tapsNeeded = 0;
        
        // Messages slideshow
        let slideshowMessages = [
            "I miss you even when we just talked.",
            "You're the first person I think of when I wake up.",
            "Your name is my favorite word.",
            "Distance means so little when someone means so much.",
            "I love you more than pizza!",
            "You're my favorite notification.",
            "Every love song reminds me of you.",
            "You're my home.",
            "I choose you. And I'll choose you every day.",
            "Forever would never be enough with you."
        ];
        let currentMessageIndex = 0;
        
        // Valentine's Day Q&A
        let questions = [
            { text: "Do you oath to be truthful with your answer?", hint: "Say: 'yes' or 'no'" },
            { text: "Do you love Harsh?", hint: "Say: 'I love Harsh' or 'No I don't'" },
            { text: "Do you think he is handsome?", hint: "Say: 'yes' or 'no'" },
            { text: "Do you think he is the right man for you?", hint: "Say: 'he is the right man' or 'Maybe'" },
            { text: "So would you like to be his valentine? (pretty wife)", hint: "Say: 'yes' or 'yes but bigger'" }
        ];
        let currentQuestion = 0;
        
        // Audio control
        let song1 = document.getElementById('song1');
        let song2 = document.getElementById('song2');
        let song3 = document.getElementById('song3');
        
        // Start game
        function startGame() {
            song1.play();
            nextStage(1);
        }
        
        // Cloud transition
        function cloudTransition(fromStage, toStage) {
            let overlay = document.getElementById('cloudOverlay');
            overlay.classList.add('active');
            
            setTimeout(() => {
                goToStage(toStage);
                
                setTimeout(() => {
                    overlay.classList.remove('active');
                }, 500);
            }, 500);
        }
        
        // Go to specific stage
        function goToStage(stageNum) {
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            document.getElementById(`stage${stageNum}`).classList.add('active');
            currentStage = stageNum;
        }
        
        // Next stage
        function nextStage(current) {
            goToStage(current + 1);
        }
        
        // Show message for Ana/Harsh
        function showMessage(person) {
            let box = document.getElementById(`${person}MessageBox`);
            let msg = document.getElementById(`${person}Message`);
            
            if (person === 'ana') {
                msg.textContent = anaMessage;
            } else {
                msg.textContent = harshMessage;
            }
            
            box.style.display = 'block';
        }
        
        function closeMessage(person) {
            document.getElementById(`${person}MessageBox`).style.display = 'none';
        }
        
        // Rose Day
        function waterFlowers() {
            if (roseCount < 5) {
                document.getElementById('roseMessage').textContent = roseMessages[roseCount];
                document.getElementById('rosePopup').style.display = 'block';
                document.getElementById('waterBtn').style.display = 'none';
            }
        }
        
        function continueWatering() {
            roseCount++;
            document.getElementById('rosePopup').style.display = 'none';
            
            if (roseCount < 5) {
                document.getElementById('waterBtn').style.display = 'block';
            } else {
                // Change to full lavender field
                document.getElementById('stage13').style.backgroundImage = "url('images/rose-day/lavender-full.png')";
                document.getElementById('goldenRibbon').style.display = 'block';
                document.getElementById('nextDayBtn').style.display = 'block';
            }
        }
        
        // Propose Day
        function expandMessage(num) {
            document.getElementById('expandedMessageText').textContent = proposeMessages[num-1];
            document.getElementById('expandedMessageBox').style.display = 'block';
        }
        
        function closeExpandedMessage() {
            document.getElementById('expandedMessageBox').style.display = 'none';
        }
        
        // Chocolate Day
        function initChocolateDay() {
            let grid = document.getElementById('chocolateGrid');
            grid.innerHTML = '';
            chocolateClicked = new Array(9).fill(false);
            
            // Randomly choose 2 positions for messages
            chocolateMessagePositions = [];
            while(chocolateMessagePositions.length < 2) {
                let pos = Math.floor(Math.random() * 9);
                if(!chocolateMessagePositions.includes(pos)) {
                    chocolateMessagePositions.push(pos);
                }
            }
            
            for(let i = 0; i < 9; i++) {
                let item = document.createElement('div');
                item.className = 'grid-item';
                item.setAttribute('data-index', i);
                item.onclick = function() { clickChocolate(i); };
                grid.appendChild(item);
            }
        }
        
        function clickChocolate(index) {
            if(chocolateClicked[index]) return;
            
            chocolateClicked[index] = true;
            let element = document.querySelector(`[data-index="${index}"]`);
            
            if(chocolateMessagePositions.includes(index)) {
                element.classList.add('message');
                let msgIndex = chocolateMessagePositions.indexOf(index);
                document.getElementById('chocoMessage').textContent = chocolateMessages[msgIndex];
                document.getElementById('chocoMessageBox').style.display = 'block';
            } else {
                element.classList.add('clicked');
            }
        }
        
        function closeChocoMessage() {
            document.getElementById('chocoMessageBox').style.display = 'none';
        }
        
        // Teddy Day
        function checkPuzzle() {
            let l1 = document.getElementById('letter1').value.toUpperCase();
            let l2 = document.getElementById('letter2').value.toUpperCase();
            let l3 = document.getElementById('letter3').value.toUpperCase();
            let l4 = document.getElementById('letter4').value.toUpperCase();
            
            if(l1 === 'E' && l2 === 'R' && l3 === 'I' && l4 === 'S') {
                // Puzzle solved
                document.getElementById('stage16').style.backgroundImage = 'none';
                document.getElementById('teddyVideo').style.display = 'block';
                
                // Create floating messages
                let container = document.getElementById('floatingMessages');
                container.style.display = 'block';
                container.innerHTML = '';
                
                for(let i = 0; i < 6; i++) {
                    let msg = document.createElement('div');
                    msg.className = 'floating-message';
                    msg.textContent = teddyMessages[i];
                    msg.style.top = Math.random() * 70 + 10 + '%';
                    msg.style.left = Math.random() * 70 + 10 + '%';
                    msg.style.pointerEvents = 'none';
                    container.appendChild(msg);
                }
            }
        }
        
        // Promise Day
        function showNextPromise() {
            if(promiseCount < promises.length) {
                document.getElementById('promiseText').textContent = promises[promiseCount];
                document.getElementById('promiseMessageBox').style.display = 'block';
            }
        }
        
        function closePromiseMessage() {
            document.getElementById('promiseMessageBox').style.display = 'none';
            promiseCount++;
            
            if(promiseCount >= promises.length) {
                document.getElementById('promiseBtn').style.display = 'none';
            }
        }
        
        // Hug Day
        function initHugDay() {
            hugMessageCount = 0;
            hugTaps = 0;
            setNewTapTarget();
            
            document.getElementById('stage18').addEventListener('click', function(e) {
                // Don't count clicks on buttons
                if(e.target.tagName !== 'BUTTON') {
                    hugTaps++;
                    document.getElementById('hugCounter').textContent = `Hugs: ${hugTaps}/${tapsNeeded}`;
                    
                    if(hugTaps >= tapsNeeded && hugMessageCount < 5) {
                        showHugMessage();
                    }
                }
            });
        }
        
        function setNewTapTarget() {
            tapsNeeded = Math.floor(Math.random() * 10) + 1;
            hugTaps = 0;
            document.getElementById('hugCounter').textContent = `Tap the image for hugs! Need ${tapsNeeded} taps`;
        }
        
        function showHugMessage() {
            document.getElementById('hugText').textContent = hugMessages[hugMessageCount];
            document.getElementById('hugMessageBox').style.display = 'block';
        }
        
        function closeHugMessage() {
            document.getElementById('hugMessageBox').style.display = 'none';
            hugMessageCount++;
            
            if(hugMessageCount < 5) {
                setNewTapTarget();
            } else {
                document.getElementById('hugCounter').textContent = 'All hugs received! ü§ó‚ù§Ô∏è';
            }
        }
        
        // Messages slideshow
        function nextMessage() {
            currentMessageIndex = (currentMessageIndex + 1) % slideshowMessages.length;
            document.getElementById('currentMessage').textContent = slideshowMessages[currentMessageIndex];
        }
        
        function prevMessage() {
            currentMessageIndex = (currentMessageIndex - 1 + slideshowMessages.length) % slideshowMessages.length;
            document.getElementById('currentMessage').textContent = slideshowMessages[currentMessageIndex];
        }
        
        // Start Valentine's Week
        function startValentineWeek() {
            song1.pause();
            song2.play();
            goToStage(13);
            initChocolateDay();
            initHugDay();
        }
        
        // Go to Valentine's Day finale
        function goToValentinesDay() {
            song2.pause();
            song3.play();
            
            // Black screen transition
            let overlay = document.getElementById('cloudOverlay');
            overlay.style.background = 'black';
            overlay.classList.add('active');
            
            setTimeout(() => {
                goToStage(20);
                
                // Slowly brighten
                let opacity = 0.9;
                let brighten = setInterval(() => {
                    opacity -= 0.1;
                    overlay.style.background = `rgba(0,0,0,${opacity})`;
                    
                    if(opacity <= 0) {
                        clearInterval(brighten);
                        overlay.classList.remove('active');
                        overlay.style.background = '';
                        
                        // Start voice recognition
                        startVoiceRecognition();
                    }
                }, 100);
            }, 1000);
        }
        
        // Next day function
        function nextDay(day) {
            if(day === 13) {  // Rose Day
                goToStage(14);  // Propose Day
            } else if(day === 14) {  // Propose Day
                goToStage(15);  // Chocolate Day
            } else if(day === 15) {  // Chocolate Day
                goToStage(16);  // Teddy Day
            } else if(day === 16) {  // Teddy Day
                goToStage(17);  // Promise Day
            } else if(day === 17) {  // Promise Day
                goToStage(18);  // Hug Day
            } else if(day === 18) {  // Hug Day
                goToStage(19);  // Kiss Day
            }
        }
        
        // Voice recognition for Valentine's Day
        function toggleMode() {
            voiceMode = !voiceMode;
            document.getElementById('modeToggle').textContent = voiceMode ? 'üé§ Voice Mode' : 'üëÜ Button Mode';
            document.getElementById('voiceIndicator').style.display = voiceMode ? 'block' : 'none';
            document.getElementById('buttonAnswers').style.display = voiceMode ? 'none' : 'flex';
            document.getElementById('buttonAnswers').style.justifyContent = 'center';
            document.getElementById('buttonAnswers').style.gap = '10px';
        }
        
        function startVoiceRecognition() {
            if('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = true;
                recognition.lang = 'en-US';
                
                recognition.onresult = function(event) {
                    let transcript = event.results[event.results.length-1][0].transcript.toLowerCase();
                    handleVoiceInput(transcript);
                };
                
                recognition.start();
            } else {
                // Fallback to button mode if voice not supported
                voiceMode = false;
                toggleMode();
            }
        }
        
        function handleVoiceInput(input) {
            if(currentQuestion === 0) {
                if(input.includes('yes')) {
                    handleAnswer('yes');
                } else if(input.includes('no')) {
                    handleAnswer('no');
                }
            } else if(currentQuestion === 1) {
                if(input.includes('i love harsh')) {
                    handleAnswer('i love harsh');
                } else if(input.includes('no')) {
                    handleAnswer('no i dont');
                }
            } else if(currentQuestion === 2) {
                if(input.includes('yes')) {
                    handleAnswer('yes');
                } else if(input.includes('no')) {
                    handleAnswer('no');
                }
            } else if(currentQuestion === 3) {
                if(input.includes('he is the right man')) {
                    handleAnswer('he is the right man');
                } else if(input.includes('maybe')) {
                    handleAnswer('maybe');
                }
            } else if(currentQuestion === 4) {
                if(input.includes('yes but bigger')) {
                    handleAnswer('yes but bigger');
                } else if(input.includes('yes')) {
                    handleAnswer('yes');
                }
            }
        }
        
        function handleAnswer(answer) {
            // Emoji showers based on answers
            if(answer === 'yes' && currentQuestion === 0) {
                showerEmojis(['‚úÖ'], 20);
                currentQuestion++;
                updateQuestion();
            } else if(answer === 'no' && currentQuestion === 0) {
                showerEmojis(['üëë', 'üòà'], 30);
                showMessageBox("Get on your knees bitchhhhhhhhhhh!!");
            } else if(answer === 'i love harsh' && currentQuestion === 1) {
                showerEmojis(['‚ù§Ô∏è', 'üíï', 'üíñ'], 50);
                currentQuestion++;
                updateQuestion();
            } else if(answer === 'no i dont' && currentQuestion === 1) {
                showerEmojis(['üò¢', 'üò≠', 'üíî'], 40);
                showMessageBox("üíî");
            } else if(answer === 'yes' && currentQuestion === 2) {
                showerEmojis(['üòä', 'ü•∞', 'üíï'], 40);
                currentQuestion++;
                updateQuestion();
            } else if(answer === 'no' && currentQuestion === 2) {
                showerEmojis(['üçÜ', 'üíß', 'üçë', 'üçÜ', 'üíß', 'üçë'], 60);
                showMessageBox("üòà");
            } else if(answer === 'he is the right man' && currentQuestion === 3) {
                showerEmojis(['üòâ', 'üíï', '‚ú®'], 40);
                currentQuestion++;
                updateQuestion();
            } else if(answer === 'maybe' && currentQuestion === 3) {
                showerEmojis(['üî´', 'üî´', 'üî´'], 30);
                showMessageBox("on your knees now!!!");
            } else if(answer === 'yes' && currentQuestion === 4) {
                showerEmojis(['üíã', '‚ù§Ô∏è', 'üéâ', 'üíã', '‚ù§Ô∏è', 'üéâ'], 60);
                showFinale();
            } else if(answer === 'yes but bigger' && currentQuestion === 4) {
                showerEmojis(['üéâ', 'üéä', '‚ú®', 'üíñ', 'ü•≥', 'üéà'], 100);
                showFinale();
            }
        }
        
        function updateQuestion() {
            if(currentQuestion < questions.length) {
                document.getElementById('questionText').textContent = questions[currentQuestion].text;
                document.getElementById('answerHint').textContent = questions[currentQuestion].hint;
            }
        }
        
        function showFinale() {
            document.getElementById('questionBox').innerHTML = `
                <h2 style="color: #ff4d6d; text-align: center;">‚ù§Ô∏è HAPPY VALENTINE'S DAY MY LOVE ‚ù§Ô∏è</h2>
                <div style="text-align: center; margin: 20px 0;">
                    <img src="images/ring.png" style="max-width: 100%; border-radius: 20px;" alt="Ring">
                </div>
                <p style="font-size: 24px; text-align: center;">Today. Tomorrow. Forever.</p>
                <p style="font-size: 18px; text-align: center;">I love you, Anabel! ‚ù§Ô∏è</p>
            `;
            
            // Fireworks effect
            for(let i = 0; i < 200; i++) {
                setTimeout(() => {
                    showerEmojis(['üéÜ', '‚ú®', 'üí•', '‚ù§Ô∏è'], 1);
                }, i * 50);
            }
        }
        
        function showMessageBox(msg) {
            document.getElementById('questionText').innerHTML = msg;
            setTimeout(() => {
                updateQuestion();
            }, 2000);
        }
        
        function showerEmojis(emojis, count) {
            let container = document.getElementById('emojiShower');
            
            for(let i = 0; i < count; i++) {
                setTimeout(() => {
                    let emoji = document.createElement('div');
                    emoji.className = 'emoji';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = Math.random() * 100 + '%';
                    emoji.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    emoji.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    
                    container.appendChild(emoji);
                    
                    setTimeout(() => {
                        emoji.remove();
                    }, 3000);
                }, i * 50);
            }
        }
        
        // Initialize all stages
        window.onload = function() {
            // Load first message in slideshow
            document.getElementById('currentMessage').textContent = slideshowMessages[0];
            
            // Initialize button answers div
            let buttonDiv = document.getElementById('buttonAnswers');
            buttonDiv.style.display = 'none';
        };
    </script>
</body>
</html>